plugins {
  id 'org.jetbrains.kotlin.jvm'
  id 'application'
  // applied after mainClassName per https://github.com/johnrengelman/shadow/issues/336
  id 'com.github.johnrengelman.shadow' version '4.0.2' apply false
}

apply plugin: 'com.github.johnrengelman.shadow'

shadowJar {
  mainClassName = 'com.github.shyiko.ktlint.Main'
  mergeServiceFiles {
    include 'META-INF/services/com.github.shyiko.ktlint.core.*'
  }
}

dependencies {
  compile project(':ktlint-core')
  compile project(':ktlint-reporter-checkstyle')
  compile project(':ktlint-reporter-json')
  compile project(':ktlint-reporter-plain')
  compile project(':ktlint-ruleset-experimental')
  compile project(':ktlint-ruleset-standard')
  compile project(':ktlint-test')
  compile deps.kotlin.stdlib
  compile deps.klob
  compile deps.aether.api
  compile deps.aether.spi
  compile deps.aether.util
  compile deps.aether.impl
  compile deps.aether.connector.basic
  compile deps.aether.transport.file
  compile deps.aether.transport.http
  compile deps.slf4j
  compile deps.aetherProvider
  compile deps.picocli

  testCompile deps.junit
  testCompile deps.assertj
  testCompile deps.jimfs
}

compileKotlin {
  sourceCompatibility = JavaVersion.VERSION_1_8
  targetCompatibility = JavaVersion.VERSION_1_8

  kotlinOptions {
    jvmTarget = '1.8'
  }
}
